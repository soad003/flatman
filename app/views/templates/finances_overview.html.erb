<% content_for :title, t('.page_title') %>

<h1 class="page-header"><span class="fa fa-bitcoin"></span> <%= t('.page_header') %>
  <div class="btn-group pull-right">
      <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
          <%= t(".month") %> <span class="caret"></span>
      </button>

      <ul class="dropdown-menu" role="menu">
          <li><a ng-click="getMonthEntries(1)">Jänner</a></li>
          <li><a ng-click="getMonthEntries(2)">Februar</a></li>
          <li><a ng-click="getMonthEntries(3)" class="list-group-item active">März</a></li>
          <li><a ng-click="getMonthEntries(4)">April</a></li>
          <li><a ng-click="getMonthEntries(5)">Mai</a></li>
          <li><a ng-click="getMonthEntries(6)">Juni</a></li>
          <li><a ng-click="getMonthEntries(7)">Juli</a></li>
          <li><a ng-click="getMonthEntries(8)">August</a><li>
          <li><a ng-click="getMonthEntries(9)">September</a><li>
          <li><a ng-click="getMonthEntries(10)">Oktober</a><li>
          <li><a ng-click="getMonthEntries(11)">November</a><li>
          <li><a ng-click="getMonthEntries(12)">Dezember</a><li>
      </ul>
  </div>
</h1>

<div class="row">
	<table class="table table-striped">
		<thead>
      <tr>
  			<th><%= t(".date") %></th>
  			<th><%= t(".name") %></th>
  			<th><%= t(".category") %></th>
  			<th class="text-right"><%= t(".value") %></th>
        <th>&nbsp;</th>
      </tr>
		</thead>
    <tbody>
      <tr ng-repeat="finance in finances track by $index" class ="">
        <td>{{finance.date | date : 'mediumDate'}}</td>
        <td>{{finance.name}}</th>
        <td>{{finance.cat_name}}</td>
        <td class="text-right">{{finance.value | customCurrency : '€ '}}</td>
        <td>
          <div class="btn-group pull-right">
            <button type="button" class="btn btn-default dropdown-toggle btn-xs" data-toggle="dropdown">
             <span class="glyphicon glyphicon-pencil"></span>
            </button>
            <ul class="dropdown-menu">
              <li>
                  <a href="/#/finances_edit/{{finance.id}}">
                      <span class="glyphicon glyphicon-pencil"></span> <%= t(".edit") %>
                  </a>
              </li>
              <li>
                  <a href="" ng-click="removeEntry(finance)">
                      <span class="glyphicon glyphicon-trash"></span> <%= t(".delete") %>
                  </a>
              </li>
            </ul>
          </div>
        </td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="5">
            <ul class="pagination pagination-sm pull-right">
                <li><a  href="">&laquo;</a></li>
                <li><a href="">1</a></li>
                <li><a href="">2</a></li>
                <li><a href="">3</a></li>
                <li><a href="">&raquo;</a></li>
            </ul>
        </td>
      </tr>
    </tfoot>
	</table>

</div>

<div class="row">
  <div class="col-md-3 col-xs-4">
    <a href="/#/finances" class = "btn btn-sm btn-default">
      <i class="fa fa-arrow-circle-o-left"></i> <%= t('.back') %>
    </a>
  </div>
</div>

<div class="row" ng-show="overviewMates.length !== 0">
  <div class="btn-group">
    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
      <img style="height:35px; width:35px" class="img-circle" ng-src="{{getSelectedOverviewMate().img_path}}"> {{getSelectedOverviewMate().name}} 
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
      <li ng-repeat="overviewMate in overviewMates">
        <div ng-click="setSelectedOverviewMateIndex($index)">
        <p>
          <img style="height:35px; width:35px" class="img-circle" ng-src="{{overviewMate.img_path}}"> {{overviewMate.name}}
          </p>
        </div>
      </li>
    </ul>
  </div>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <div class="row adv-table editable-table">
          <div ng-show="{{getSelectedOverviewMate().entries.length == 0}}">
              <%= t('.no_entries') %>
          </div>
          <table ng-hide="{{getSelectedOverviewMate().entries.length == 0}}"
                  class="table table-striped table-hover table-borderless table-scrollable"
                  id="editable-sample">
              <thead>
                  <tr>
                      <th>
                          <%= t('.date') %></th>
                      <th>
                          <%= t('.what') %></th>
                      <th class="text-right"><%= t('.value') %></th>
                      <th> </th>
                  </tr>
              </thead>
              <tbody>
                  <tr ng-repeat="entry in getSelectedOverviewMate().entries">
                      <td class="hidden-xs">{{entry.date| date : 'longDate'}}</td>
                      <td class="visible-xs">{{entry.date| date : 'shortDate'}}</td>
                      <td>{{entry.what}}</td>
                      <td class="text-right" ng-class="{'text-success':entry.value >
              0, 'text-danger': entry.value
              < 0}"> {{entry.value| customCurrency : '€ '}} </td>
                      <td>
                          <button class="btn btn-default btn-xs pull-right"
                                  ng-hide="entry.id == -1"
                                  ng-click="removePayment(entry,  getSelectedOverviewMate())">
                              <span class="glyphicon glyphicon-trash"></span>
                          </button>
                      </td>
                  </tr>
              </tbody>
          </table>

          <pagination on-select-page="setPage(getSelectedOverviewMate(), page)" total-items="getSelectedOverviewMate().entryLength" page="getSelectedOverviewMate().page" items-per-page="entriesPerPage" max-size="5" class="hidden-xs pagination-sm pull-right" boundary-links="true" ng-hide="entriesPerPage >= getSelectedOverviewMate().entryLength" rotate="true" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;">
          </pagination>
      </div>
</div>

