<div>
    <div class = "page-head">
        <h1 class="page-header"><span class="fa fa-bitcoin"></span> <%= t('.page_header') %>
           
                <div class="btn-group pull-right">
                <button type="button" class="btn btn-primary pull-right" data-toggle="dropdown">
                    <span class="glyphicon glyphicon-plus"> </span><span class="hidden-xs"> <%= t(".add_fin") %></span>
                </button>
                <ul class="dropdown-menu">
                                            <li>
                                                <a href="/#/finances_new">
                                                     <i class="fa fa-credit-card"></i> <%= t(".newBill") %>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="/#/create_payment">
                                                   <i class="fa fa-money"></i> <%= t(".newPaym") %>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
            
        </h1>
    </div>

    <div>
        <form action="/#/finances_new" ng-show="!intro()">
            <div class="jumbotron text-center">
                <i class="fa fa-bitcoin fa-5x"></i>
                <h2><%= t(".help_title") %></h2>
                <%= t(".help_paragraph1") %><br>
            </div>
        </form>
    </div>

    <div class ="container" ng-show="intro()">
        <div class="row">
            <div class="col-md-7"> 
                           <div class="panel panel-default">
                    <div class="panel-heading text-center">
                       <i class="fa fa-money"></i> <%= t(".overview_flat_members") %>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="panel-group row" id="accordion">
                                    <div ng-repeat="finance_member in financeTables track by $index" class="panel panel-default">
                                        <div class="panel-heading"  data-toggle="collapse" data-parent="#accordion" data-target="#collapse{{$index}}">
                                            <div class="row panel-title" style="cursor: pointer">
                                                <div class="col-xs-2 col-sm-1">
                                                    <img style="height:35px; width:35px" class="img-circle" ng-src="{{finance_member.img_path}}">
                                                </div>

                                                <div class="col-xs-10 col-sm-11">
                                                   <span class="pull-left">
                                                        {{finance_member.name}}
                                                        <span ng-show="finance_member.value > 0">
                                                            <%= t('.owes_you') %>
                                                        </span>
                                                        <span ng-show="finance_member.value < 0">
                                                            <%= t('.gets') %>
                                                        </span>
                                                    </span>
                                                    <span class="pull-right">
                                                        <span ng-class="{'text-success':finance_member.value >
                                                            0, 'text-danger': finance_member.value
                                                            < 0}">
                                                                {{math.abs(finance_member.value) | customCurrency : '€ '}}
                                                        </span>
                                                    </span>

                                                </div>
                                              </div>
                                        </div>
                                        <div id="collapse{{$index}}" class="panel-collapse collapse">
                                            <div class="panel-body row">
                                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                    <div class="row adv-table editable-table">
                                                        <div ng-show="{{finance_member.entries.length == 0}}">
                                                            <%= t('.no_entries') %>
                                                        </div>
                                                        <table ng-hide="{{finance_member.entries.length == 0}}"
                                                                class="table table-striped table-hover table-borderless table-scrollable"
                                                                id="editable-sample">
                                                            <thead>
                                                                <tr>
                                                                    <th>
                                                                        <%= t('.date') %></th>
                                                                    <th>
                                                                        <%= t('.what') %></th>
                                                                    <th class="text-right"><%= t('.value') %></th>
                                                                    <th> </th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="entry in finance_member.entries">
                                                                    <td class="hidden-xs">{{entry.date| date : 'longDate'}}</td>
                                                                    <td class="visible-xs">{{entry.date| date : 'shortDate'}}</td>
                                                                    <td>{{entry.what}}</td>
                                                                    <td class="text-right"> {{entry.value| customCurrency : '€ '}} </td>
                                                                    <td>
                                                                        <button class="btn btn-default btn-xs pull-right"
                                                                                ng-hide="entry.id == -1"
                                                                                ng-click="removePayment(entry, finance_member)">
                                                                            <span class="glyphicon glyphicon-trash"></span>
                                                                        </button>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                                <div class="col-sm-12">
                                                    <ul class="pagination pagination-sm pull-right" ng-show="getPages(finance_member) != 1">
                                                        <li>
                                                            <a ng-click="changePage(finance_member, - 1)" href="">&laquo;</a>
                                                        </li>
                                                        <li ng-class="{active: i == finance_member.page}"
                                                            class="hidden-xs hidden-sm"
                                                            ng-repeat="i in getRange(finance_member)">
                                                            <a ng-click="setEntriesForPage(i, finance_member)" href="">{{i}}</a>
                                                        </li>
                                                        <li class="active hidden-md hidden-lg">
                                                            <a href="">{{finance_member.page}}</a>
                                                        </li>
                                                        <li>
                                                            <a href="" ng-click="changePage(finance_member, 1)">&raquo;</a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                    <div class="panel-footer announcement-bottom">

                            <%= t('.received_money_enter_payment')%>
                        <span class="pull-right">
                            <a href="/#/create_payment">
                                <%= t(".add_payment") %> <i class="fa fa-arrow-circle-right"></i>
                            </a>
                        </span>
                    </div>
                </div>         
                 <div class="panel panel-default">
                    <div class="panel-heading text-center">
                       <i class="fa fa-credit-card"></i> <%= t(".spendings") %>
                    </div>
                    <div class="panel-body">
                        <table class="table table-striped">
                            <tr>
                                <th><%= t(".date") %></th>
                                <th><%= t(".name") %></th>
                                <th class="hidden-xs"><%= t(".cat")%></th>
                                <th class="text-right"><%= t(".value")%></th>
                                <th>&nbsp;</th>
                            </tr>
                            <tr ng-repeat="finance in finances track by $index">
                                <td>{{finance.date| date: 'shortDate'}}</td>
                                <td>{{finance.name}}</td>
                                <td class="hidden-xs">{{finance.cat_name}}</td>
                                <td class="text-right">{{finance.value| customCurrency : '€ '}}</td>
                                <td>
                                    <div class="btn-group pull-right">
                                        <button type="button" class="btn btn-default dropdown-toggle btn-xs" data-toggle="dropdown">
                                            <span class="glyphicon glyphicon-pencil"></span>
                                        </button>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <a href="/#/finances_edit/{{finance.id}}">
                                                    <span class="glyphicon glyphicon-pencil"></span> <%= t(".edit") %>
                                                </a>
                                            </li>
                                            <li>
                                                <a href="" ng-click="removeEntry(finance)">
                                                    <span class="glyphicon glyphicon-trash"></span> <%= t(".delete") %>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div class="panel-footer announcement-bottom">
                        <div class="text-right">
                            <a href="/#/finances_overview">
                                <%= t(".show_all") %> <i class="fa fa-arrow-circle-right"></i>
                            </a>
                        </div>
                    </div>
                </div>

 
            </div>

            <div class="row col-md-5">
                 <div class="panel panel-default hidden-xs" ng-show="enoughEntries()">
                    <div class="panel-heading text-center">
                      <i class="fa fa-info"></i>   <%= t(".biggest_by_cat") %>
                    </div>
                    <div class="panel-body">
                        <canvas donutchart options="" data="chartData" width="500" height="300"></canvas>
                    </div>
                    <div class="panel-footer">
                        <div class="row">
                            <div class="col-md-4 col-sm-4" ng-repeat="cat in chartData" title="{{cat.value | customCurrency : '€ '}}">
                                <i class="fa fa-circle" style="color: {{cat.color}}" ></i> {{cat.cat_name}}</br>({{cat.value | customCurrency : '€ '}})
                            </div>
                        </div>
                    </div>
                </div>
               

            </div>

        </div>
    </div>

</div>
